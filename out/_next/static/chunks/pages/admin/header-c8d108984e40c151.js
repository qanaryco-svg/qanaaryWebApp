(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[965],{5926:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/header",function(){return n(2974)}])},2522:function(e,a,n){"use strict";n.d(a,{K9:function(){return saveBrand},Od:function(){return loadBrand},r2:function(){return resetBrand}});let r="qanari:brand";function loadBrand(){try{let e=localStorage.getItem(r);if(e)return JSON.parse(e)}catch(e){}return{logo:null,primaryColor:"#0ea5a4",secondaryColor:"#334155",fontPersian:{name:"IranSans"},fontLatin:{name:"System"},language:"fa"}}function notify(){try{window.dispatchEvent(new CustomEvent("qanari:brand-updated"))}catch(e){}try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:brand");e.postMessage({type:"updated"}),e.close()}}catch(e){}}function saveBrand(e){try{return localStorage.setItem(r,JSON.stringify(e)),notify(),!0}catch(e){return!1}}function resetBrand(){try{return localStorage.removeItem(r),notify(),!0}catch(e){return!1}}},2974:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return AdminHeaderPage}});var r=n(5893),t=n(7294),l=n(8675),s=n(2522),o=n(1163),c=n(3790);let d="qanari:heroImage";function LogoUploader(){let[e,a]=(0,t.useState)(null),n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{try{let e=localStorage.getItem(d);e&&a(e)}catch(e){}},[]),(0,r.jsxs)("div",{className:"mt-3 text-sm text-right",children:[(0,r.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{ref:n,type:"file",accept:"image/*",onChange:e=>{var n;let r=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!r)return;let t=new FileReader;t.onload=()=>{let e=t.result;try{localStorage.setItem(d,e),a(e),window.dispatchEvent(new Event("qanari:hero-update"))}catch(e){console.error("failed to save hero image",e)}},t.readAsDataURL(r)},className:"hidden"}),(0,r.jsx)("span",{className:"px-3 py-2 border rounded bg-white",children:"آپلود عکس قهرمان"})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem(d),a(null),window.dispatchEvent(new Event("qanari:hero-update")),n.current&&(n.current.value="")},className:"mr-2 px-3 py-2 border rounded text-sm",children:"بازنشانی"}),e&&(0,r.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,r.jsx)("img",{src:e,alt:"پیش‌نمایش",className:"h-12 w-auto object-contain border"})})]})}function AdminHeaderPage(){var e,a;let n=(0,o.useRouter)(),[d,i]=(0,t.useState)((0,s.Od)()),u=(()=>{try{return(0,c.d)()}catch(e){return{push:e=>{}}}})();return(0,t.useEffect)(()=>{let e="true"===sessionStorage.getItem("qanari:admin");e||n.push("/admin/login"),i((0,s.Od)())},[]),(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ویرایش هدر و برند"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"لوگو (آپلود)"}),(0,r.jsx)(LogoUploader,{})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"رنگ اصلی (hex)"}),(0,r.jsx)("input",{className:"w-full border px-3 py-2 rounded",value:d.primaryColor||"",onChange:e=>i({...d,primaryColor:e.target.value}),placeholder:"#0ea5a4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"رنگ ثانویه (hex)"}),(0,r.jsx)("input",{className:"w-full border px-3 py-2 rounded",value:d.secondaryColor||"",onChange:e=>i({...d,secondaryColor:e.target.value}),placeholder:"#334155"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"فونت فارسی (نام)"}),(0,r.jsx)("input",{className:"w-full border px-3 py-2 rounded",value:(null===(e=d.fontPersian)||void 0===e?void 0:e.name)||"",onChange:e=>i({...d,fontPersian:{...d.fontPersian||{name:""},name:e.target.value}}),placeholder:"IranSans"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"فونت لاتین (نام)"}),(0,r.jsx)("input",{className:"w-full border px-3 py-2 rounded",value:(null===(a=d.fontLatin)||void 0===a?void 0:a.name)||"",onChange:e=>i({...d,fontLatin:{...d.fontLatin||{name:""},name:e.target.value}}),placeholder:"System"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{let e=(0,s.K9)(d);e?(i((0,s.Od)()),u.push("تنظیمات هدر ذخیره شد",{level:"success"})):u.push("خطا در ذخیره تنظیمات هدر",{level:"error"})},className:"px-4 py-2 bg-qanari text-qanariDark rounded",children:"ذخیره"}),(0,r.jsx)("button",{onClick:()=>{try{(0,s.r2)(),i((0,s.Od)()),u.push("تنظیمات هدر به حالت پیش‌فرض بازگشت",{level:"success"})}catch(e){u.push("خطا در بازنشانی تنظیمات",{level:"error"})}},className:"px-4 py-2 border rounded",children:"بازنشانی"}),(0,r.jsx)("button",{onClick:()=>n.push("/admin"),className:"px-4 py-2 border rounded",children:"بازگشت"})]})]})]})})}}},function(e){e.O(0,[424,675,774,888,179],function(){return e(e.s=5926)}),_N_E=e.O()}]);