(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{3251:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/branding",function(){return t(4204)}])},2522:function(e,n,t){"use strict";t.d(n,{K9:function(){return saveBrand},Od:function(){return loadBrand},r2:function(){return resetBrand}});let a="qanari:brand";function loadBrand(){try{let e=localStorage.getItem(a);if(e)return JSON.parse(e)}catch(e){}return{logo:null,primaryColor:"#0ea5a4",secondaryColor:"#334155",fontPersian:{name:"IranSans"},fontLatin:{name:"System"},language:"fa"}}function notify(){try{window.dispatchEvent(new CustomEvent("qanari:brand-updated"))}catch(e){}try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:brand");e.postMessage({type:"updated"}),e.close()}}catch(e){}}function saveBrand(e){try{return localStorage.setItem(a,JSON.stringify(e)),notify(),!0}catch(e){return!1}}function resetBrand(){try{return localStorage.removeItem(a),notify(),!0}catch(e){return!1}}},4204:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return AdminBranding}});var a=t(5893),r=t(7294),l=t(1163),s=t(1159),o=t(2463),i=t(2522);function readFileAsDataUrl(e){return new Promise((n,t)=>{let a=new FileReader;a.onload=()=>n(a.result),a.onerror=()=>t(Error("failed to read file")),a.readAsDataURL(e)})}function AdminBrandForm(e){var n,t;let{onSaved:l}=e,[s,o]=(0,r.useState)(()=>(0,i.Od)()),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{o((0,i.Od)())},[]);let onLogo=async e=>{var n;let t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!t)return;let a=await readFileAsDataUrl(t);o(e=>({...e,logo:a}))},onUploadFont=async(e,n)=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=await readFileAsDataUrl(a),l={name:a.name,dataUrl:r};o(e=>"fa"===n?{...e,fontPersian:l}:{...e,fontLatin:l})};return(0,a.jsxs)("div",{className:"p-4 border rounded",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"تنظیمات برند"}),(0,a.jsxs)("div",{className:"mb-4 text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"لوگو"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{ref:c,type:"file",accept:"image/*",onChange:onLogo}),(0,a.jsx)("button",{onClick:()=>{o(e=>({...e,logo:null})),c.current&&(c.current.value="")},className:"px-3 py-1 border rounded",children:"حذف"})]}),s.logo&&(0,a.jsx)("img",{src:s.logo,alt:"logo",className:"mt-2 h-16 object-contain"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"رنگ اصلی"}),(0,a.jsx)("input",{value:s.primaryColor||"",onChange:e=>o(n=>({...n,primaryColor:e.target.value})),type:"color"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"رنگ ثانویه"}),(0,a.jsx)("input",{value:s.secondaryColor||"",onChange:e=>o(n=>({...n,secondaryColor:e.target.value})),type:"color"})]})]}),(0,a.jsxs)("div",{className:"mb-4 text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"زبان پیش‌فرض"}),(0,a.jsxs)("select",{value:s.language,onChange:e=>o(n=>({...n,language:e.target.value})),className:"px-2 py-1 border rounded",children:[(0,a.jsx)("option",{value:"fa",children:"فارسی"}),(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"tr",children:"T\xfcrk\xe7e"})]})]}),(0,a.jsxs)("div",{className:"mb-4 text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"فونت فارسی (آپلود .woff/.ttf)"}),(0,a.jsx)("input",{ref:d,type:"file",accept:".woff,.woff2,.ttf,.otf",onChange:e=>onUploadFont(e,"fa")}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(null===(n=s.fontPersian)||void 0===n?void 0:n.name)||"ندارد"})]}),(0,a.jsxs)("div",{className:"mb-4 text-right",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"فونت لاتین (آپلود .woff/.ttf)"}),(0,a.jsx)("input",{ref:u,type:"file",accept:".woff,.woff2,.ttf,.otf",onChange:e=>onUploadFont(e,"en")}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(null===(t=s.fontLatin)||void 0===t?void 0:t.name)||"ندارد"})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)("button",{onClick:()=>{let e=(0,i.Od)();o(e)},className:"px-3 py-2 border rounded",children:"بازنشانی"}),(0,a.jsx)("button",{onClick:()=>{(0,i.K9)(s),l&&l(),alert("تنظیمات ذخیره شد")},className:"px-3 py-2 bg-green-500 text-white rounded",children:"ذخیره"})]})]})}function AdminBranding(){let e=(0,l.useRouter)();return(0,r.useEffect)(()=>{let n="true"===sessionStorage.getItem("qanari:admin");n||e.push("/admin/login")},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{}),(0,a.jsxs)("main",{className:"container py-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"تنظیمات برند"}),(0,a.jsx)(AdminBrandForm,{onSaved:()=>{}})]}),(0,a.jsx)(o.Z,{})]})}}},function(e){e.O(0,[424,607,774,888,179],function(){return e(e.s=3251)}),_N_E=e.O()}]);