"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{923:function(e,t,r){r.r(t),r.d(t,{default:function(){return StyleFinder}});var i=r(5893),n=r(7294),s=r(2128),o=r(8120),c=r(4858),a=r(3790),d=r(4702);function StyleFinder(e){let{onClose:t}=e,{add:r}=(()=>{try{return(0,c.j)()}catch(e){return{add:(e,t)=>{}}}})(),l=(()=>{try{return(0,a.d)()}catch(e){return}})(),[u,p]=(0,n.useState)(0),[g,f]=(0,n.useState)({}),[m,y]=(0,n.useState)([]),v=[{key:"color",text:"کدام رنگ را بیشتر می‌پسندید؟",options:[{v:"red",t:"قرمز"},{v:"blue",t:"آبی"},{v:"neutral",t:"خنثی"}]},{key:"occasion",text:"برای چه مناسبتی نیاز دارید؟",options:[{v:"casual",t:"روزمره"},{v:"party",t:"مهمانی"},{v:"work",t:"محیط کار"}]},{key:"silhouette",text:"ترجیح فرم لباس؟",options:[{v:"fitted",t:"فیت/چسبان"},{v:"loose",t:"آزاد"}]},{key:"budget",text:"بودجه تقریبی شما؟",options:[{v:"low",t:"کم"},{v:"mid",t:"متوسط"},{v:"high",t:"زیاد"}]}],onSelect=(e,t)=>{if(f(r=>({...r,[e]:t})),u<v.length-1)p(u+1);else{let r={...g,[e]:t},i=(0,s.recommendByAnswers)(r,"fa");y(i);try{let e=(0,d.currentMember)();if(e&&e.id){let t={...e,extra:JSON.stringify(Object.assign({},"object"==typeof e.extra&&e.extra?e.extra:{},{styleProfile:r}))};(0,d.updateMember)(t);try{window.dispatchEvent(new CustomEvent("qanari:members-updated"))}catch(e){}}}catch(e){}}},onAdd=e=>{try{r(e,1),null==l||l.push("محصول به سبد اضافه شد",{level:"success"})}catch(e){try{null==l||l.push("خطا در افزودن به سبد",{level:"error"})}catch(e){}}};return(0,i.jsxs)("div",{className:"p-4 rounded shadow max-w-3xl mx-auto bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-all transform motion-safe:animate-fade-in",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,i.jsx)("h2",{className:"text-lg font-bold",children:"استایل‌فایندر"}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"px-3 py-1 text-sm",onClick:()=>{p(0),f({}),y([]),t&&t()},children:"بستن"})})]}),m.length?(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-3",children:"محصولات پیشنهادی برای شما"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>{var t,r;return(0,i.jsxs)("div",{className:"border rounded p-3 bg-white dark:bg-gray-800",children:[(0,i.jsx)("img",{src:null!==(r=null===(t=e.images)||void 0===t?void 0:t[0])&&void 0!==r?r:"/logo.png",alt:(0,o.pC)(e,"fa").title,className:"w-full h-40 object-cover mb-2"}),(0,i.jsx)("div",{className:"font-semibold mb-1",children:(0,o.pC)(e,"fa").title}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.price.toLocaleString()," تومان"]}),(0,i.jsx)("button",{className:"px-3 py-2 bg-qanari text-qanariDark rounded",onClick:()=>onAdd(e),children:"افزودن به سبد"})]},e.id)})})]}):(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("div",{className:"font-semibold mb-2",children:v[u].text}),(0,i.jsx)("div",{className:"flex gap-3",children:v[u].options.map(e=>(0,i.jsx)("button",{className:"px-4 py-2 border rounded hover:scale-105 transition-transform",onClick:()=>onSelect(v[u].key,e.v),children:e.t},e.v))})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["سوال ",u+1," از ",v.length]})]})]})}},5739:function(e,t,r){r.d(t,{R:function(){return i}});let i=[{id:"p1",title:"پیراهن بهاری قناری",price:129e3,images:["/p1.svg"],description:"پیراهن سبک و رنگی مناسب فصل بهار.",category:"پیراهن",discount:15},{id:"p2",title:"شال ابریشمی",price:89e3,images:["/p2.svg"],description:"شال ابریشمی با الگوهای شکیل.",category:"شال",discount:0},{id:"p3",title:"کت تک مجلسی",price:35e4,images:["/p3.svg"],description:"کت تک با برش‌ فلسفه‌مند برای مهمانی‌ها.",category:"کت و کاپشن",discount:10},{id:"p4",title:"دامن کلوش",price:99e3,images:["/p4.svg"],description:"دامن کلوش مناسب استایل روزمره.",category:"دامن"},{id:"p5",title:"شلوار جین برازنده",price:149e3,images:["/p5.svg"],description:"شلوار جین با برش راحت و شیک.",category:"شلوار"},{id:"p6",title:"اکسسوری طلایی",price:45e3,images:["/p6.svg"],description:"گردنبند و گوشواره ست.",category:"اکسسوری"},{id:"p7",title:"کفش اسپرت راحت",price:22e4,images:["/p7.svg"],description:"کفش اسپرت مناسب پیاده‌روی و باشگاه.",category:"کفش"},{id:"p8",title:"هودی گرم و نرم",price:179e3,images:["/p8.svg"],description:"هودی با جنس ملایم و ضدپیلینگ.",category:"هودی"},{id:"p9",title:"تی‌شرت نخی ساده",price:69e3,images:["/p9.svg"],description:"تی‌شرت نخی با برش استاندارد و رنگ‌های متنوع.",category:"تی‌شرت"},{id:"p10",title:"تاپ کتان",price:49e3,images:["/p10.svg"],description:"تاپ راحتی برای استایل تابستانی.",category:"تاپ"},{id:"p11",title:"ست ورزشی",price:239e3,images:["/p11.svg"],description:"ست ورزشی قابل تنفس و خشک‌شونده سریع.",category:"لباس ورزشی"},{id:"p12",title:"ژاکت بافتنی",price:199e3,images:["/p12.svg"],description:"بافتنی دست‌دوخت با الیاف نرم.",category:"بافت"},{id:"p13",title:"کفش پاشنه‌دار شیک",price:32e4,images:["/p13.svg"],description:"کفش پاشنه‌دار مناسب مجالس و مهمانی‌ها.",category:"کفش"},{id:"p14",title:"ست زیرپوش راحت",price:79e3,images:["/p14.svg"],description:"زیرپوش نرم و ضدحساسیت برای استفاده روزمره.",category:"لباس زیر"},{id:"p15",title:"جوراب‌های جور",price:19e3,images:["/p15.svg"],description:"جوراب‌های با کیفیت در بسته‌های چندتایی.",category:"جوراب"}]},2929:function(e,t,r){r.d(t,{GC:function(){return resetProducts},Ir:function(){return deleteProduct},QD:function(){return loadProducts},V_:function(){return findProduct},gK:function(){return addProduct},nM:function(){return updateProduct}});var i=r(5739);let n="qanari:products";function loadProducts(){try{let e=localStorage.getItem(n);if(e)return JSON.parse(e)}catch(e){}try{let e=i.R.map(e=>({...e}));return localStorage.setItem(n,JSON.stringify(e)),e}catch(e){return i.R}}function saveProducts(e){localStorage.setItem(n,JSON.stringify(e));try{window.dispatchEvent(new CustomEvent("qanari:products-updated"))}catch(e){}try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:products");e.postMessage({type:"updated"}),e.close()}}catch(e){}}function resetProducts(){try{let e=i.R.map(e=>({...e}));localStorage.setItem(n,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("qanari:products-updated"));try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:products");e.postMessage({type:"reset"}),e.close()}}catch(e){}return!0}catch(e){return!1}}function findProduct(e){if(!e)return;let t=loadProducts();return t.find(t=>t.id===e)}function addProduct(e){let t=loadProducts();t.unshift(e),saveProducts(t)}function updateProduct(e){let t=loadProducts(),r=t.findIndex(t=>t.id===e.id);r>=0&&(t[r]=e),saveProducts(t)}function deleteProduct(e){let t=loadProducts().filter(t=>t.id!==e);saveProducts(t)}},2128:function(e,t,r){r.r(t),r.d(t,{loadStyleFinderConfig:function(){return loadStyleFinderConfig},recommendByAnswers:function(){return recommendByAnswers},saveStyleFinderConfig:function(){return saveStyleFinderConfig}});var i=r(2929),n=r(8120);function recommendByAnswers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fa";try{let r=(0,i.QD)(),s=loadStyleFinderConfig(),o={party:["پیراهن","دامن","اکسسوری"],casual:["تی‌شرت","شلوار","هودی","بافت"],work:["کت و کاپشن","دامن","پیراهن"]},c={red:["قرمز","red"],blue:["آبی","blue"],neutral:["سفید","سیاه","خاکی","کت","مشکی"]},a=r.map(r=>{let i=0,a=(0,n.pC)(r,t),d=(a.title||r.title||"").toLowerCase(),l=(a.description||r.description||"").toLowerCase();if(e.occasion){let t=s&&s.occasionMap&&s.occasionMap[e.occasion]||[],n=t.length>0?t:o[e.occasion]||[];n.includes(r.category)&&(i+=3)}if(r.style&&Array.isArray(r.style.tags)){for(let t of r.style.tags)if(e.occasion&&t.toLowerCase().includes(e.occasion)){i+=2;break}}if(e.color){let t=s&&s.colorMap&&s.colorMap[e.color]||[],r=t.length>0?t:c[e.color]||[];for(let e of r)if(d.includes(e)||l.includes(e)){i+=2;break}}if("fitted"===e.silhouette?(d.includes("اسلیم")||l.includes("فیت")||d.includes("fitted"))&&(i+=1):"loose"===e.silhouette&&(d.includes("آزاد")||l.includes("آزاد"))&&(i+=1),e.budget){var u;let t=(u=r.price)<1e5?"low":u<3e5?"mid":"high";t===e.budget&&(i+=2)}return r.price<2e5&&(i+=.2),{product:r,score:i}});return a.sort((e,t)=>t.score-e.score),a.filter(e=>e.score>0).slice(0,12).map(e=>e.product)}catch(e){try{return(0,i.QD)().slice(0,12)}catch(e){return[]}}}let s="qanari:stylefinder:config";function loadStyleFinderConfig(){try{let e=window.localStorage.getItem(s);return e?JSON.parse(e):{}}catch(e){return{}}}function saveStyleFinderConfig(e){try{window.localStorage.setItem(s,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("qanari:stylefinder-updated"))}catch(e){}}}}]);