"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{8675:function(e,t,n){n.d(t,{Z:function(){return AdminLayout}});var i=n(5893),r=n(7294),s=n(1664),d=n.n(s),a=n(1163),c=n(3790),o=n(2929),l=n(8120),u=n(4702),p=n(819),m=n(3293);function AdminLayout(e){let{children:t}=e,n=(0,a.useRouter)(),[s,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(""),[x,y]=(0,r.useState)([]),v=(0,r.useRef)(null),j=(()=>{try{return(0,c.d)()}catch(e){return{push:e=>{}}}})(),logout=()=>{try{sessionStorage.removeItem("qanari:admin")}catch(e){}j.push("شما از پنل مدیریت خارج شدید",{level:"success"}),n.push("/")},{t:C,lang:b,setLang:w}=(0,m.Z)();return(0,r.useEffect)(()=>{if(!f||""===f.trim()){y([]);return}let e=f.trim().toLowerCase(),t=[];try{let n=(0,o.QD)();for(let i of n){let n=(0,l.pC)(i,b);((n.title||"").toLowerCase().includes(e)||(n.description||"").toLowerCase().includes(e))&&t.push({type:"product",id:i.id,title:n.title||i.title})}}catch(e){}try{let n=(0,u.loadMembers)();for(let i of n)((i.name||"").toLowerCase().includes(e)||(i.email||"").toLowerCase().includes(e))&&t.push({type:"member",id:i.id,title:i.name||i.email})}catch(e){}try{let n=(0,p.BD)();for(let i of n)(i.title.toLowerCase().includes(e)||(i.excerpt||"").toLowerCase().includes(e))&&t.push({type:"content",id:i.id,title:i.title})}catch(e){}y(t.slice(0,10))},[f]),(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("aside",{className:"w-64 bg-white shadow-md p-4",children:[(0,i.jsx)("div",{className:"mb-6 font-bold text-gray-900",children:C("adminPanel")}),(0,i.jsxs)("nav",{className:"flex flex-col gap-2 text-sm",children:[(0,i.jsx)(d(),{href:"/admin",children:C("adminPanel")}),(0,i.jsx)(d(),{href:"/admin/users",children:C("users")}),(0,i.jsx)(d(),{href:"/admin/comments",children:"مدیریت نظرات"}),(0,i.jsx)(d(),{href:"/admin/media",children:"مدیریت فایل‌ها"}),(0,i.jsx)(d(),{href:"/admin/header",children:"هدر و برند"}),(0,i.jsx)(d(),{href:"/admin/content",children:C("content")}),(0,i.jsx)(d(),{href:"/admin/footer",children:C("footer")}),(0,i.jsx)(d(),{href:"/admin/style-finder",children:"Style Finder"}),(0,i.jsx)(d(),{href:"/admin/orders",children:C("orders")}),(0,i.jsx)(d(),{href:"/admin/marketing",children:C("marketing")}),(0,i.jsx)(d(),{href:"/",children:C("backToSite")})]}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("button",{onClick:()=>h(!0),className:"w-full px-3 py-2 bg-red-50 text-red-600 border rounded text-sm",children:C("logout")})})]}),(0,i.jsxs)("main",{className:"flex-1 p-6 text-gray-900",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex-1 flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>n.push("/admin/content"),className:"px-3 py-2 border rounded text-sm",children:"افزودن محتوا"}),(0,i.jsx)("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("qanari:alerts-send"))}catch(e){}},className:"px-3 py-2 border rounded text-sm",children:"ارسال اعلان"})]}),(0,i.jsxs)("div",{className:"ml-4 relative",children:[(0,i.jsx)("input",{ref:v,value:f,onChange:e=>g(e.target.value),placeholder:"جستجو بین محصولات، کاربران، محتوا...",className:"px-3 py-2 border rounded w-96 text-sm"}),x.length>0&&(0,i.jsx)("div",{className:"absolute mt-1 bg-white border rounded shadow max-h-64 overflow-auto w-96 z-40",children:x.map(e=>(0,i.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-right",onClick:()=>{g(""),y([]),"product"===e.type?n.push("/admin/manage"):"member"===e.type?n.push("/admin/users"):"content"===e.type&&n.push("/admin/content")},children:[(0,i.jsx)("div",{className:"text-sm",children:e.title}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]},"".concat(e.type,":").concat(e.id)))})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("label",{htmlFor:"admin-lang",className:"sr-only",children:"زبان"}),(0,i.jsxs)("select",{id:"admin-lang",value:b,onChange:e=>w(e.target.value),className:"border px-2 py-1 rounded text-sm",children:[(0,i.jsx)("option",{value:"fa",children:"فارسی"}),(0,i.jsx)("option",{value:"en",children:"English"}),(0,i.jsx)("option",{value:"ar",children:"العربية"}),(0,i.jsx)("option",{value:"tr",children:"T\xfcrk\xe7e"})]})]}),(0,i.jsx)("button",{className:"px-3 py-2 border rounded",onClick:()=>h(!0),children:"خروج"})]})]}),t]})]}),s&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded shadow max-w-sm w-full",children:[(0,i.jsx)("div",{className:"text-lg font-semibold mb-4",children:C("confirmLogout")}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,i.jsx)("button",{onClick:()=>h(!1),className:"px-3 py-1 border rounded",children:C("cancel")}),(0,i.jsx)("button",{onClick:()=>{h(!1),logout()},className:"px-3 py-1 bg-red-600 text-white rounded",children:C("logout")})]})]})})]})}},5739:function(e,t,n){n.d(t,{R:function(){return i}});let i=[{id:"p1",title:"پیراهن بهاری قناری",price:129e3,images:["/p1.svg"],description:"پیراهن سبک و رنگی مناسب فصل بهار.",category:"پیراهن",discount:15},{id:"p2",title:"شال ابریشمی",price:89e3,images:["/p2.svg"],description:"شال ابریشمی با الگوهای شکیل.",category:"شال",discount:0},{id:"p3",title:"کت تک مجلسی",price:35e4,images:["/p3.svg"],description:"کت تک با برش‌ فلسفه‌مند برای مهمانی‌ها.",category:"کت و کاپشن",discount:10},{id:"p4",title:"دامن کلوش",price:99e3,images:["/p4.svg"],description:"دامن کلوش مناسب استایل روزمره.",category:"دامن"},{id:"p5",title:"شلوار جین برازنده",price:149e3,images:["/p5.svg"],description:"شلوار جین با برش راحت و شیک.",category:"شلوار"},{id:"p6",title:"اکسسوری طلایی",price:45e3,images:["/p6.svg"],description:"گردنبند و گوشواره ست.",category:"اکسسوری"},{id:"p7",title:"کفش اسپرت راحت",price:22e4,images:["/p7.svg"],description:"کفش اسپرت مناسب پیاده‌روی و باشگاه.",category:"کفش"},{id:"p8",title:"هودی گرم و نرم",price:179e3,images:["/p8.svg"],description:"هودی با جنس ملایم و ضدپیلینگ.",category:"هودی"},{id:"p9",title:"تی‌شرت نخی ساده",price:69e3,images:["/p9.svg"],description:"تی‌شرت نخی با برش استاندارد و رنگ‌های متنوع.",category:"تی‌شرت"},{id:"p10",title:"تاپ کتان",price:49e3,images:["/p10.svg"],description:"تاپ راحتی برای استایل تابستانی.",category:"تاپ"},{id:"p11",title:"ست ورزشی",price:239e3,images:["/p11.svg"],description:"ست ورزشی قابل تنفس و خشک‌شونده سریع.",category:"لباس ورزشی"},{id:"p12",title:"ژاکت بافتنی",price:199e3,images:["/p12.svg"],description:"بافتنی دست‌دوخت با الیاف نرم.",category:"بافت"},{id:"p13",title:"کفش پاشنه‌دار شیک",price:32e4,images:["/p13.svg"],description:"کفش پاشنه‌دار مناسب مجالس و مهمانی‌ها.",category:"کفش"},{id:"p14",title:"ست زیرپوش راحت",price:79e3,images:["/p14.svg"],description:"زیرپوش نرم و ضدحساسیت برای استفاده روزمره.",category:"لباس زیر"},{id:"p15",title:"جوراب‌های جور",price:19e3,images:["/p15.svg"],description:"جوراب‌های با کیفیت در بسته‌های چندتایی.",category:"جوراب"}]},819:function(e,t,n){n.d(t,{BD:function(){return loadContents},sI:function(){return seedIfEmpty},tc:function(){return addContent},x0:function(){return updateContent},yd:function(){return deleteContent}});let i="qanari:contents";function loadContents(){try{let e=localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){return[]}}function saveContents(e){localStorage.setItem(i,JSON.stringify(e));try{window.dispatchEvent(new CustomEvent("qanari:contents-updated"))}catch(e){}}function addContent(e){let t=loadContents();t.unshift(e),saveContents(t);try{let t=n(8366);t&&"function"==typeof t.addActivity&&t.addActivity(e.authorId||void 0,"content_created",{id:e.id,title:e.title})}catch(e){}}function updateContent(e){let t=loadContents(),i=t.findIndex(t=>t.id===e.id);if(-1===i)return!1;e.updatedAt=Date.now(),t[i]=e,saveContents(t);try{let t=n(8366);t&&"function"==typeof t.addActivity&&t.addActivity(e.authorId||void 0,"content_updated",{id:e.id,title:e.title})}catch(e){}return!0}function deleteContent(e){let t=loadContents().filter(t=>t.id!==e);saveContents(t);try{let t=n(8366);t&&"function"==typeof t.addActivity&&t.addActivity(void 0,"content_deleted",{id:e})}catch(e){}}function seedIfEmpty(){let e=loadContents();if(e.length>0)return;let t=Date.now();saveContents([{id:"c1",title:"درباره ما",excerpt:"متنی درباره سایت",body:"<p>متن درباره ما</p>",type:"article",category:"اطلاعات",tags:["درباره"],status:"published",createdAt:t-864e6},{id:"c2",title:"راهنمای خرید",excerpt:"چگونه خرید کنیم",body:"<p>راهنمای خرید</p>",type:"article",category:"راهنما",tags:["خرید"],status:"draft",createdAt:t-432e6}])}},2929:function(e,t,n){n.d(t,{GC:function(){return resetProducts},Ir:function(){return deleteProduct},QD:function(){return loadProducts},V_:function(){return findProduct},gK:function(){return addProduct},nM:function(){return updateProduct}});var i=n(5739);let r="qanari:products";function loadProducts(){try{let e=localStorage.getItem(r);if(e)return JSON.parse(e)}catch(e){}try{let e=i.R.map(e=>({...e}));return localStorage.setItem(r,JSON.stringify(e)),e}catch(e){return i.R}}function saveProducts(e){localStorage.setItem(r,JSON.stringify(e));try{window.dispatchEvent(new CustomEvent("qanari:products-updated"))}catch(e){}try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:products");e.postMessage({type:"updated"}),e.close()}}catch(e){}}function resetProducts(){try{let e=i.R.map(e=>({...e}));localStorage.setItem(r,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("qanari:products-updated"));try{if("undefined"!=typeof BroadcastChannel){let e=new BroadcastChannel("qanari:products");e.postMessage({type:"reset"}),e.close()}}catch(e){}return!0}catch(e){return!1}}function findProduct(e){if(!e)return;let t=loadProducts();return t.find(t=>t.id===e)}function addProduct(e){let t=loadProducts();t.unshift(e),saveProducts(t)}function updateProduct(e){let t=loadProducts(),n=t.findIndex(t=>t.id===e.id);n>=0&&(t[n]=e),saveProducts(t)}function deleteProduct(e){let t=loadProducts().filter(t=>t.id!==e);saveProducts(t)}}}]);